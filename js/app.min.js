"use strict";class ImgList{constructor(t,e){this.selector=t,this.arrImg=[],this.numPage=e,this._getPicture().then(t=>{this.arrImg=[...t],this.init()})}_getPicture(){return fetch(`https://picsum.photos/v2/list?page=${this.numPage}&limit=11`).then(t=>t.json())}init(){let e=document.querySelector(this.selector),s='<ul class="gallery__list">';for(let t=0;t<this.arrImg.length;t++)s+=this.renderItem(this.arrImg[t],t+1);s+="</ul>",e.insertAdjacentHTML("beforeend",s);let t=document.querySelectorAll(".gallery__item-small");t.forEach(t=>{t.addEventListener("click",t=>{e.insertAdjacentHTML("afterend",this.renderLightBox(t.target.getAttribute("id"),t.target.getAttribute("data-author"))),this.likes(),this.comments(),this.remover()})})}renderItem(t,e){return`<li class = "gallery__item-small gallery__item_${e}">
      <img class = "gallery__img" src = "https://picsum.photos/id/${t.id}/400" alt = "picture with id ${t.id}" width ="100" id = "${t.id}" data-author = "${t.author}">
      </li>`}renderLightBox(t,e){return`<section class="picture">
      <h2 class="visually-hidden">picture</h2>
      <div class="picture__wrap">
        <img class="picture__img" src="https://picsum.photos/id/${t}/1000" alt="picture with id ${t}">
        <div class="picture__likes-author">
          <button class="picture__likes likes" type="button">
            <span class="likes__number">71</span></button>
          <p class="picture__author">Author: ${e}</p>
        </div>
        <div class="picture__comments comments">
          <h2 class="comments__title">Comments</h2>
          <ol class="comments__list">
          </ol>
          <form action="#" method="post" class="comments__form">
            <div class="comments__inner">
              <input type="text" class="comments__input" id="comments__input" required>
              <label class="comments__input-label" for="comments__input">Your comment</label>
            </div>
            <button class="comments__button" type="submit">submit</button>
          </form>
        </div>
      </div>
    </section>`}remover(){let t=document.querySelector(".picture"),e=document.querySelector(".picture__img");e.addEventListener("click",()=>{t.remove()})}likes(){let t=document.querySelector(".likes");t.addEventListener("click",()=>{t.classList.contains("like__active")?t.lastChild.textContent--:t.lastChild.textContent++,t.classList.toggle("like__active")});let e=document.querySelector(".comments__form"),s=document.querySelector(".comments__list"),i=document.querySelector(".comments__field");e.onsubmit=function(t){t.preventDefault();let e=document.createElement("li");e.classList.add("comments__item"),e.textContent=i.value,i.value="",s.append(e)}}comments(){let t=document.querySelector(".comments__form"),s=document.querySelector(".comments__list"),i=document.querySelector(".comments__input");t.onsubmit=function(t){t.preventDefault();let e=document.createElement("li");e.classList.add("comments__item"),e.textContent=i.value,i.value="",s.append(e)}}}let initialGallery=new ImgList(".gallery",0),numPage=1,nextGallery=[],moreBtn=document.querySelector(".more");moreBtn.addEventListener("click",()=>{numPage++,nextGallery.push(new ImgList(".gallery",numPage))});